<!-- Tambahan di dalam <div id="hasilContainer"> -->
<div id="hasilContainer" style="display: none;">
    <h3>Hasil Laporan:</h3>
    <textarea id="laporan" rows="12" readonly></textarea><br>
    <button onclick="copyText()">Copy</button>
    <button onclick="shareToWhatsApp()">Kirim via WhatsApp</button>
</div>

<!-- Tambahan di bagian <script> -->
<script>
    document.getElementById("wsid").addEventListener("input", function () {
        const wsid = this.value.trim().toUpperCase();
        const lokasi = wsidToLokasi[wsid] || "";
        document.getElementById("lokasi").value = lokasi;
    });

    document.getElementById("formLaporan").addEventListener("submit", function(e) {
        e.preventDefault();
        const data = new FormData(this);

        const lembar100 = parseInt(data.get("denom100")) || 0;
        const lembar50 = parseInt(data.get("denom50")) || 0;

        const total100 = lembar100 * 100000;
        const total50 = lembar50 * 50000;

        const hasil = `
No Amplop: ${data.get("noAmplop")}
WSID: ${data.get("wsid")}
Lokasi: ${data.get("lokasi")}
Tgl Bongkar: ${data.get("tglBongkar")}
Jam Bongkar: ${data.get("jamBongkar")}
Tgl Kejadian: ${data.get("tglKejadian")}
Jam Kejadian: ${data.get("jamKejadian")}
Denom 100: ${lembar100} lembar (Rp${total100.toLocaleString("id-ID")})
Denom 50: ${lembar50} lembar (Rp${total50.toLocaleString("id-ID")})
Staf: ${data.get("staf")}
TB: ${data.get("tb")}
PIC Cencon: ${data.get("pic")}
Terjepit di: ${data.get("terjepit")}
        `.trim();

        document.getElementById("laporan").value = hasil;
        document.getElementById("hasilContainer").style.display = "block";
    });

    function copyText() {
        const textArea = document.getElementById('laporan');
        textArea.select();
        document.execCommand('copy');
        alert("Laporan telah disalin!");
    }

    function shareToWhatsApp() {
        const laporan = document.getElementById("laporan").value;
        const encodedText = encodeURIComponent(laporan);
        const whatsappURL = `https://wa.me/?text=${encodedText}`;
        window.open(whatsappURL, '_blank');
    }
</script>
